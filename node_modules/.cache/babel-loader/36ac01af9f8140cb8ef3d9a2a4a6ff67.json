{"ast":null,"code":"import _objectSpread from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";var baseUrl=\"https://identitytoolkit.googleapis.com/v1/\";var apiKey=\"AIzaSyCyUo859e-kKU0NkpuXKa8zuIHxsWR67Vc\";export var signupWithEmailAndPassword=function signupWithEmailAndPassword(details,callback){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(baseUrl,\"accounts:signUp?key=\").concat(apiKey),{email:details.email,password:details.password,returnSecureToken:true});case 3:response=_context.sent;dispatch({type:\"SIGNUP\",payload:response.data});localStorage.setItem('token',response.data.idToken);return _context.abrupt(\"return\",callback(response.data));case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",callback({error:true,response:_context.t0.response}));case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var LoginWithEmailAndPassword=function LoginWithEmailAndPassword(details,callback){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(baseUrl,\"accounts:signInWithPassword?key=\").concat(apiKey),{email:details.email,password:details.password,returnSecureToken:true});case 3:response=_context2.sent;dispatch({type:\"LOGIN\",payload:response.data});console.log(response.data);localStorage.setItem('token',response.data.idToken);return _context2.abrupt(\"return\",callback(response.data));case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);return _context2.abrupt(\"return\",callback({error:true,response:_context2.t0.response}));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var isLoggedIn=function isLoggedIn(callback){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var token,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=localStorage.getItem('token');if(token){_context3.next=4;break;}return _context3.abrupt(\"return\");case 4:_context3.next=6;return axios.post(\"\".concat(baseUrl,\"accounts:lookup?key=\").concat(apiKey),{idToken:token});case 6:response=_context3.sent;dispatch({type:\"LOGIN\",payload:_objectSpread({idToken:token,localId:response.data.users[0].localId},response.data)});// localStorage.setItem('token', response.data.users[0].idToken)\nreturn _context3.abrupt(\"return\",callback(response.data));case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);return _context3.abrupt(\"return\",callback({error:true,response:_context3.t0.response}));case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){localStorage.removeItem(\"token\");dispatch({type:\"LOGOUT\"});};};","map":{"version":3,"names":["axios","baseUrl","apiKey","signupWithEmailAndPassword","details","callback","dispatch","post","email","password","returnSecureToken","response","type","payload","data","localStorage","setItem","idToken","console","log","error","LoginWithEmailAndPassword","isLoggedIn","token","getItem","localId","users","logout","removeItem"],"sources":["/Users/sushantnandwani/Desktop/shopping-app/src/actions/auth.js"],"sourcesContent":["import axios from \"axios\"\n\nconst baseUrl = `https://identitytoolkit.googleapis.com/v1/`;\nconst apiKey = `AIzaSyCyUo859e-kKU0NkpuXKa8zuIHxsWR67Vc`;\nexport const signupWithEmailAndPassword = (details, callback) => {\n    return async (dispatch) => {\n        try {\n            const response = await axios.post(`${baseUrl}accounts:signUp?key=${apiKey}`,\n                {\n                    email: details.email,\n                    password: details.password,\n                    returnSecureToken: true\n                })\n            dispatch({\n                type: \"SIGNUP\",\n                payload: response.data\n            })\n            localStorage.setItem('token', response.data.idToken)\n            return callback(response.data)\n\n        } catch (error) {\n            console.log(error)\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\n\nexport const LoginWithEmailAndPassword = (details, callback) => {\n    return async (dispatch) => {\n        try {\n            const response = await axios.post(`${baseUrl}accounts:signInWithPassword?key=${apiKey}`,\n                {\n                    email: details.email,\n                    password: details.password,\n                    returnSecureToken: true\n                })\n            dispatch({\n                type: \"LOGIN\",\n                payload: response.data\n            })\n            console.log(response.data)\n            localStorage.setItem('token', response.data.idToken)\n            return callback(response.data)\n\n        } catch (error) {\n            console.log(error)\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\nexport const isLoggedIn = (callback) => {\n    return async (dispatch) => {\n        try {\n            let token = localStorage.getItem('token')\n            if (!token) {\n                return;\n            }\n            const response = await axios.post(`${baseUrl}accounts:lookup?key=${apiKey}`,\n                {\n                    idToken: token\n                })\n            dispatch({\n                type: \"LOGIN\",\n                payload:{\n                    idToken:token,\n                    localId:response.data.users[0].localId,\n                    ...response.data\n                } \n            })\n            // localStorage.setItem('token', response.data.users[0].idToken)\n            return callback(response.data)\n\n        } catch (error) {\n            console.log(error)\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\n\nexport const logout = () => {\n    return (dispatch) => {\n        localStorage.removeItem(\"token\")\n        dispatch({\n            type:\"LOGOUT\"\n        })\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}