{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";export var addItemHandler=function addItemHandler(item){return function(dispatch){dispatch({type:\"ADD_ITEM\",payload:{item:item}});};};export var removeItemHandler=function removeItemHandler(id){return function(dispatch){dispatch({type:\"REMOVE_ITEM\",payload:{id:id}});};};export var clearItemHandler=function clearItemHandler(){return function(dispatch){dispatch({type:\"CLEAR_CART\"});};};export var placeOrderHandler=function placeOrderHandler(callback){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var _getState,auth,cart,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_getState=getState(),auth=_getState.auth,cart=_getState.cart;if(auth.idToken){_context.next=4;break;}return _context.abrupt(\"return\",callback({error:true,data:{error:\"Please login to save the order.\"}}));case 4:_context.next=6;return axios.post(\"https://shopping-app-b9c1a-default-rtdb.firebaseio.com/orders/\".concat(auth.localId,\".json?auth=\").concat(auth.idToken),_objectSpread({},cart));case 6:response=_context.sent;dispatch({type:\"CLEAR_CART\"});return _context.abrupt(\"return\",callback({error:false,data:response.data}));case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",callback(_objectSpread({error:true},_context.t0.response)));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","addItemHandler","item","dispatch","type","payload","removeItemHandler","id","clearItemHandler","placeOrderHandler","callback","getState","auth","cart","idToken","error","data","post","localId","response"],"sources":["/Users/sushantnandwani/Desktop/shopping-app/src/actions/index.js"],"sourcesContent":["import axios from \"axios\"\n\nexport const addItemHandler = (item) => {\n    return dispatch => {\n        dispatch({\n            type: \"ADD_ITEM\",\n            payload: {\n                item: item\n            }\n        })\n    }\n\n}\nexport const removeItemHandler = (id) => {\n    return dispatch => {\n        dispatch({\n            type: \"REMOVE_ITEM\",\n            payload: {\n                id: id\n            }\n        })\n    }\n}\nexport const clearItemHandler = () => {\n    return dispatch => {\n        dispatch({\n            type: \"CLEAR_CART\",\n        })\n    }\n}\n\nexport const placeOrderHandler = (callback) => {\n    return async (dispatch, getState) => {\n        try{\n            const{auth, cart } = getState()\n            if(!auth.idToken){\n                return callback({\n                    error:true,\n                    data:{\n                        error:\"Please login to save the order.\"\n                    }\n                })\n            }\n            const response = await axios.post(`https://shopping-app-b9c1a-default-rtdb.firebaseio.com/orders/${auth.localId}.json?auth=${auth.idToken}`,{\n                ...cart\n            })\n            dispatch({\n                type: \"CLEAR_CART\",\n            })\n            return callback({\n                error:false,\n                data:response.data\n            })\n        }catch(error){\n            return callback({\n                error:true,\n                ...error.response\n            })\n        }\n        \n    }\n}\n"],"mappings":"kZAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAACC,IAAD,CAAU,CACpC,MAAO,UAAAC,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLC,IAAI,CAAE,UADD,CAELC,OAAO,CAAE,CACLH,IAAI,CAAEA,IADD,CAFJ,CAAD,CAAR,CAMH,CAPD,CASH,CAVM,CAWP,MAAO,IAAMI,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,EAAD,CAAQ,CACrC,MAAO,UAAAJ,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLC,IAAI,CAAE,aADD,CAELC,OAAO,CAAE,CACLE,EAAE,CAAEA,EADC,CAFJ,CAAD,CAAR,CAMH,CAPD,CAQH,CATM,CAUP,MAAO,IAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAClC,MAAO,UAAAL,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLC,IAAI,CAAE,YADD,CAAD,CAAR,CAGH,CAJD,CAKH,CANM,CAQP,MAAO,IAAMK,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,QAAD,CAAc,CAC3C,iGAAO,iBAAOP,QAAP,CAAiBQ,QAAjB,+KAEsBA,QAAQ,EAF9B,CAEOC,IAFP,WAEOA,IAFP,CAEaC,IAFb,WAEaA,IAFb,IAGKD,IAAI,CAACE,OAHV,yDAIYJ,QAAQ,CAAC,CACZK,KAAK,CAAC,IADM,CAEZC,IAAI,CAAC,CACDD,KAAK,CAAC,iCADL,CAFO,CAAD,CAJpB,+BAWwBf,MAAK,CAACiB,IAAN,yEAA4EL,IAAI,CAACM,OAAjF,uBAAsGN,IAAI,CAACE,OAA3G,mBAChBD,IADgB,EAXxB,QAWOM,QAXP,eAcChB,QAAQ,CAAC,CACLC,IAAI,CAAE,YADD,CAAD,CAAR,CAdD,gCAiBQM,QAAQ,CAAC,CACZK,KAAK,CAAC,KADM,CAEZC,IAAI,CAACG,QAAQ,CAACH,IAFF,CAAD,CAjBhB,4FAsBQN,QAAQ,gBACXK,KAAK,CAAC,IADK,EAER,YAAMI,QAFE,EAtBhB,uEAAP,mEA6BH,CA9BM"},"metadata":{},"sourceType":"module"}