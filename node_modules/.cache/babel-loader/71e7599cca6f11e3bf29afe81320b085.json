{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sushantnandwani/Desktop/shopping-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import ListItem from\"./ListItems/ListItem\";import axios from\"axios\";import Loader from\"../UI/Loader\";import{useParams,useSearchParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Products=function Products(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loader=_useState4[0],setLoader=_useState4[1];var params=useParams();var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParam=_useSearchParams2[0];var queryParam=searchParam.get('search');useEffect(function(){function fetchItems(){return _fetchItems.apply(this,arguments);}function _fetchItems(){_fetchItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var slug,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;slug=\"items.json\";if(params.category){slug=\"items-\".concat(params.category,\".json\");}if(queryParam){slug+=\"?search=\".concat(queryParam);}_context.next=6;return axios.get(\"https://shopping-app-b9c1a-default-rtdb.firebaseio.com/\".concat(slug));case 6:response=_context.sent;data=response.data.map(function(item,index){return _objectSpread(_objectSpread({},item),{},{id:index});});setItems(data);setLoader(false);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setLoader(false);// navigate('404')\ncase 16:_context.prev=16;setLoader(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,12,16,19]]);}));return _fetchItems.apply(this,arguments);}fetchItems();return function(){setItems([]);setLoader(true);};},[params.category,queryParam]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-list\",children:/*#__PURE__*/_jsx(\"div\",{className:\"product-list--wrapper\",children:items.map(function(item){return/*#__PURE__*/_jsx(ListItem,{data:item},item.id);})})}),loader&&/*#__PURE__*/_jsx(Loader,{})]});};export default Products;","map":{"version":3,"names":["useEffect","useState","ListItem","axios","Loader","useParams","useSearchParams","Products","items","setItems","loader","setLoader","params","searchParam","queryParam","get","fetchItems","slug","category","response","data","map","item","index","id","console","log"],"sources":["/Users/sushantnandwani/Desktop/shopping-app/src/components/Products/Products.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport ListItem from \"./ListItems/ListItem\";\nimport axios from \"axios\";\nimport Loader from \"../UI/Loader\";\nimport { useParams, useSearchParams } from \"react-router-dom\";\nconst Products = () => {\n\n    const [items, setItems] = useState([]);\n    const [loader, setLoader] = useState(true);\n    const params = useParams()\n    const [searchParam,] = useSearchParams()\n    const queryParam = searchParam.get('search')\n\n    useEffect(() => {\n        async function fetchItems() {\n            try {\n                let slug = `items.json`\n                if (params.category) {\n                    slug = `items-${params.category}.json`\n                }\n                if(queryParam){\n                    slug+= `?search=${queryParam}`\n                }\n                const response = await axios.get(`https://shopping-app-b9c1a-default-rtdb.firebaseio.com/${slug}`)\n                const data = response.data.map((item, index) => {\n                    return {\n                        ...item,\n                        id: index\n                    }\n                })\n                setItems(data)\n                setLoader(false)\n            } catch (error) {\n                console.log(error)\n                setLoader(false)\n                // navigate('404')\n            } finally {\n                setLoader(false)\n            }\n\n        }\n        fetchItems();\n\n        return () => {\n            setItems([]);\n            setLoader(true);\n        }\n\n    }, [params.category, queryParam])\n\n    return (\n        <>\n            <div className={\"product-list\"}>\n                <div className={\"product-list--wrapper\"}>\n                    {items.map((item) => {\n                        return <ListItem key={item.id} data={item} />\n                    })}\n\n                </div>\n            </div>\n            {loader && <Loader />}\n        </>\n    )\n\n}\nexport default Products;"],"mappings":"mhBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,SAAP,KAAqB,sBAArB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,OAAP,KAAmB,cAAnB,CACA,OAASC,SAAT,CAAoBC,eAApB,KAA2C,kBAA3C,C,6IACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAEnB,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA4BR,QAAQ,CAAC,IAAD,CAApC,yCAAOS,MAAP,eAAeC,SAAf,eACA,GAAMC,OAAM,CAAGP,SAAS,EAAxB,CACA,qBAAuBC,eAAe,EAAtC,sDAAOO,WAAP,sBACA,GAAMC,WAAU,CAAGD,WAAW,CAACE,GAAZ,CAAgB,QAAhB,CAAnB,CAEAf,SAAS,CAAC,UAAM,SACGgB,WADH,0IACZ,4KAEYC,IAFZ,cAGQ,GAAIL,MAAM,CAACM,QAAX,CAAqB,CACjBD,IAAI,iBAAYL,MAAM,CAACM,QAAnB,SAAJ,CACH,CACD,GAAGJ,UAAH,CAAc,CACVG,IAAI,oBAAcH,UAAd,CAAJ,CACH,CART,sBAS+BX,MAAK,CAACY,GAAN,kEAAoEE,IAApE,EAT/B,QAScE,QATd,eAUcC,IAVd,CAUqBD,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC5C,sCACOD,IADP,MAEIE,EAAE,CAAED,KAFR,GAIH,CALY,CAVrB,CAgBQd,QAAQ,CAACW,IAAD,CAAR,CACAT,SAAS,CAAC,KAAD,CAAT,CAjBR,iFAmBQc,OAAO,CAACC,GAAR,cACAf,SAAS,CAAC,KAAD,CAAT,CACA;AArBR,yBAuBQA,SAAS,CAAC,KAAD,CAAT,CAvBR,sGADY,6CA4BZK,UAAU,GAEV,MAAO,WAAM,CACTP,QAAQ,CAAC,EAAD,CAAR,CACAE,SAAS,CAAC,IAAD,CAAT,CACH,CAHD,CAKH,CAnCQ,CAmCN,CAACC,MAAM,CAACM,QAAR,CAAkBJ,UAAlB,CAnCM,CAAT,CAqCA,mBACI,wCACI,YAAK,SAAS,CAAE,cAAhB,uBACI,YAAK,SAAS,CAAE,uBAAhB,UACKN,KAAK,CAACa,GAAN,CAAU,SAACC,IAAD,CAAU,CACjB,mBAAO,KAAC,QAAD,EAAwB,IAAI,CAAEA,IAA9B,EAAeA,IAAI,CAACE,EAApB,CAAP,CACH,CAFA,CADL,EADJ,EADJ,CASKd,MAAM,eAAI,KAAC,MAAD,IATf,GADJ,CAcH,CA3DD,CA4DA,cAAeH,SAAf"},"metadata":{},"sourceType":"module"}