{"ast":null,"code":"import axios from \"axios\";\nconst baseUrl = `https://identitytoolkit.googleapis.com/v1/`;\nconst apiKey = `AIzaSyCyUo859e-kKU0NkpuXKa8zuIHxsWR67Vc`;\nexport const signupWithEmailAndPassword = (details, callback) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`${baseUrl}accounts:signUp?key=${apiKey}`, {\n        email: details.email,\n        password: details.password,\n        returnSecureToken: true\n      });\n      dispatch({\n        type: \"SIGNUP\",\n        payload: response.data\n      });\n      localStorage.setItem('token', response.data.idToken);\n      return callback(response.data);\n    } catch (error) {\n      console.log(error);\n      return callback({\n        error: true,\n        response: error.response\n      });\n    }\n  };\n};\nexport const LoginWithEmailAndPassword = (details, callback) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`${baseUrl}accounts:signInWithPassword?key=${apiKey}`, {\n        email: details.email,\n        password: details.password,\n        returnSecureToken: true\n      });\n      dispatch({\n        type: \"LOGIN\",\n        payload: response.data\n      });\n      console.log(response.data);\n      localStorage.setItem('token', response.data.idToken);\n      return callback(response.data);\n    } catch (error) {\n      console.log(error);\n      return callback({\n        error: true,\n        response: error.response\n      });\n    }\n  };\n};\n_c = LoginWithEmailAndPassword;\nexport const isLoggedIn = callback => {\n  return async dispatch => {\n    try {\n      let token = localStorage.getItem('token');\n\n      if (!token) {\n        return;\n      }\n\n      const response = await axios.post(`${baseUrl}accounts:lookup?key=${apiKey}`, {\n        idToken: token\n      });\n      dispatch({\n        type: \"LOGIN\",\n        payload: {\n          idToken: token,\n          ...response.data\n        }\n      }); // localStorage.setItem('token', response.data.users[0].idToken)\n\n      return callback(response.data);\n    } catch (error) {\n      console.log(error);\n      return callback({\n        error: true,\n        response: error.response\n      });\n    }\n  };\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginWithEmailAndPassword\");","map":{"version":3,"names":["axios","baseUrl","apiKey","signupWithEmailAndPassword","details","callback","dispatch","response","post","email","password","returnSecureToken","type","payload","data","localStorage","setItem","idToken","error","console","log","LoginWithEmailAndPassword","isLoggedIn","token","getItem"],"sources":["/Users/sushantnandwani/Desktop/shopping-app/src/actions/auth.js"],"sourcesContent":["import axios from \"axios\"\n\nconst baseUrl = `https://identitytoolkit.googleapis.com/v1/`;\nconst apiKey = `AIzaSyCyUo859e-kKU0NkpuXKa8zuIHxsWR67Vc`;\nexport const signupWithEmailAndPassword = (details, callback) => {\n    return async (dispatch) => {\n        try {\n            const response = await axios.post(`${baseUrl}accounts:signUp?key=${apiKey}`,\n                {\n                    email: details.email,\n                    password: details.password,\n                    returnSecureToken: true\n                })\n            dispatch({\n                type: \"SIGNUP\",\n                payload: response.data\n            })\n            localStorage.setItem('token', response.data.idToken)\n            return callback(response.data)\n\n        } catch (error) {\n            console.log(error)\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\n\nexport const LoginWithEmailAndPassword = (details, callback) => {\n    return async (dispatch) => {\n        try {\n            const response = await axios.post(`${baseUrl}accounts:signInWithPassword?key=${apiKey}`,\n                {\n                    email: details.email,\n                    password: details.password,\n                    returnSecureToken: true\n                })\n            dispatch({\n                type: \"LOGIN\",\n                payload: response.data\n            })\n            console.log(response.data)\n            localStorage.setItem('token', response.data.idToken)\n            return callback(response.data)\n\n        } catch (error) {\n            console.log(error)\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\nexport const isLoggedIn = (callback) => {\n    return async (dispatch) => {\n        try {\n            let token = localStorage.getItem('token')\n            if (!token) {\n                return;\n            }\n            const response = await axios.post(`${baseUrl}accounts:lookup?key=${apiKey}`,\n                {\n                    idToken: token\n                })\n            dispatch({\n                type: \"LOGIN\",\n                payload:{\n                    idToken:token,\n                    ...response.data\n                } \n            })\n            // localStorage.setItem('token', response.data.users[0].idToken)\n            return callback(response.data)\n\n        } catch (error) {\n            console.log(error)\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}